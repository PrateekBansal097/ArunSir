var ddlevelsmenu={enableshim:!0,arrowpointers:{downarrow:["images/arrow-down.gif",11,7],rightarrow:["images/arrow-right.gif",12,12],showarrow:{toplevel:!0,sublevel:!0}},hideinterval:200,effects:{enableswipe:!0,enablefade:!0,duration:500},httpsiframesrc:"blank.htm",topmenuids:[],topitems:{},subuls:{},lastactivesubul:{},topitemsindex:-1,ulindex:-1,hidetimers:{},shimadded:!1,nonFF:!/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent),getoffset:function(e,t){return e.offsetParent?e[t]+this.getoffset(e.offsetParent,t):e[t]},getoffsetof:function(e){e._offsets={left:this.getoffset(e,"offsetLeft"),top:this.getoffset(e,"offsetTop")}},getwindowsize:function(){this.docwidth=window.innerWidth?window.innerWidth-10:this.standardbody.clientWidth-10,this.docheight=window.innerHeight?window.innerHeight-15:this.standardbody.clientHeight-18},gettopitemsdimensions:function(){for(var e=0;e<this.topmenuids.length;e++)for(var t=this.topmenuids[e],s=0;s<this.topitems[t].length;s++){var i=this.topitems[t][s],n=document.getElementById(i.getAttribute("rel"));i._dimensions={w:i.offsetWidth,h:i.offsetHeight,submenuw:n.offsetWidth,submenuh:n.offsetHeight}}},isContained:function(e,t){for(var t=window.event||t,s=t.relatedTarget||("mouseover"==t.type?t.fromElement:t.toElement);s&&s!=e;)try{s=s.parentNode}catch(t){s=e}return s==e?!0:!1},addpointer:function(e,t,s,i){var n=document.createElement("img");n.src=s[0],n.style.width=s[1]+"px",n.style.height=s[2]+"px","rightarrowpointer"==t&&(n.style.left=e.offsetWidth-s[2]-2+"px"),n.className=t;var o=e.childNodes[1!=e.firstChild.nodeType?1:0];o&&"SPAN"==o.tagName&&(e=o),"before"==i?e.insertBefore(n,e.firstChild):e.appendChild(n)},css:function(e,t,s){var i=new RegExp("(^|\\s+)"+t+"($|\\s+)","ig");return"check"==s?i.test(e.className):void("remove"==s?e.className=e.className.replace(i,""):"add"!=s||i.test(e.className)||(e.className+=" "+t))},addshimmy:function(e){var t=document.createElement(window.opera?"div":"iframe");t.className="ddiframeshim",t.setAttribute("src","https:"==location.protocol?this.httpsiframesrc:"about:blank"),t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),e.appendChild(t);try{t.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}catch(s){}return t},positionshim:function(e,t,s,i,n){if(e._istoplevel){var n=window.pageYOffset?window.pageYOffset:this.standardbody.scrollTop,o=e._offsets.top-n,d=n+this.docheight-e._offsets.top-e._dimensions.h;o>0&&(this.shimmy.topshim.style.left=i+"px",this.shimmy.topshim.style.top=n+"px",this.shimmy.topshim.style.width="99%",this.shimmy.topshim.style.height=o+"px"),d>0&&(this.shimmy.bottomshim.style.left=i+"px",this.shimmy.bottomshim.style.top=e._offsets.top+e._dimensions.h+"px",this.shimmy.bottomshim.style.width="99%",this.shimmy.bottomshim.style.height=d+"px")}},hideshim:function(){this.shimmy.topshim.style.width=this.shimmy.bottomshim.style.width=0,this.shimmy.topshim.style.height=this.shimmy.bottomshim.style.height=0},buildmenu:function(e,t,s,i,n,o){t._master=e,t._pos=i,t._istoplevel=n,n&&this.addEvent(t,function(){ddlevelsmenu.hidemenu(ddlevelsmenu.subuls[this._master][parseInt(this._pos)])},"click"),this.subuls[e][i]=s,t._dimensions={w:t.offsetWidth,h:t.offsetHeight,submenuw:s.offsetWidth,submenuh:s.offsetHeight},this.getoffsetof(t),s.style.left=0,s.style.top=0,s.style.visibility="hidden",this.addEvent(t,function(e){if(!ddlevelsmenu.isContained(this,e)){var s=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];this._istoplevel&&(ddlevelsmenu.css(this,"selected","add"),clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])),ddlevelsmenu.getoffsetof(t);var i=window.pageXOffset?window.pageXOffset:ddlevelsmenu.standardbody.scrollLeft,n=window.pageYOffset?window.pageYOffset:ddlevelsmenu.standardbody.scrollTop,d=this._offsets.left+this._dimensions.submenuw+(this._istoplevel&&"topbar"==o?0:this._dimensions.w),h=this._offsets.top+this._dimensions.submenuh,l=this._istoplevel?this._offsets.left+("sidebar"==o?this._dimensions.w:0):this._dimensions.w;d-i>ddlevelsmenu.docwidth&&(l+=-this._dimensions.submenuw+(this._istoplevel&&"topbar"==o?this._dimensions.w:-this._dimensions.w)),s.style.left=l+"px";var m=this._istoplevel?this._offsets.top+("sidebar"==o?0:this._dimensions.h):this.offsetTop;h-n>ddlevelsmenu.docheight&&(m+=this._dimensions.submenuh<this._offsets.top+("sidebar"==o?this._dimensions.h:0)-n?-this._dimensions.submenuh+(this._istoplevel&&"topbar"==o?-this._dimensions.h:this._dimensions.h):-(this._offsets.top-n)+(this._istoplevel&&"topbar"==o?-this._dimensions.h:0)),s.style.top=m+"px",ddlevelsmenu.enableshim&&(0==ddlevelsmenu.effects.enableswipe||ddlevelsmenu.nonFF)?ddlevelsmenu.positionshim(t,s,o,i,n):s.FFscrollInfo={x:i,y:n},ddlevelsmenu.showmenu(t,s,o)}},"mouseover"),this.addEvent(t,function(e){var t=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];this._istoplevel?ddlevelsmenu.isContained(this,e)||ddlevelsmenu.isContained(t,e)||ddlevelsmenu.hidemenu(t):this._istoplevel||ddlevelsmenu.isContained(this,e)||ddlevelsmenu.hidemenu(t)},"mouseout")},setopacity:function(e,t){e.style.opacity=t,"string"!=typeof e.style.opacity&&(e.style.MozOpacity=t,e.filters&&(e.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+100*t+")"))},showmenu:function(e,t,s){if(this.effects.enableswipe||this.effects.enablefade){if(this.effects.enableswipe){var i=e._istoplevel&&"topbar"==s?e._dimensions.submenuh:e._dimensions.submenuw;t.style.width=t.style.height=0,t.style.overflow="hidden"}this.effects.enablefade&&this.setopacity(t,0),t._curanimatedegree=0,t.style.visibility="visible",clearInterval(t._animatetimer),t._starttime=(new Date).getTime(),t._animatetimer=setInterval(function(){ddlevelsmenu.revealmenu(e,t,i,s)},10)}else t.style.visibility="visible"},revealmenu:function(e,t,s,i){var n=(new Date).getTime()-t._starttime;n<this.effects.duration?(this.effects.enableswipe&&(0==t._curanimatedegree&&(t.style[e._istoplevel&&"topbar"==i?"width":"height"]="auto"),t.style[e._istoplevel&&"topbar"==i?"height":"width"]=t._curanimatedegree*s+"px"),this.effects.enablefade&&this.setopacity(t,t._curanimatedegree)):(clearInterval(t._animatetimer),this.effects.enableswipe&&(t.style.width="auto",t.style.height="auto",t.style.overflow="visible"),this.effects.enablefade&&(this.setopacity(t,1),t.style.filter=""),this.enableshim&&t.FFscrollInfo&&this.positionshim(e,t,i,t.FFscrollInfo.x,t.FFscrollInfo.y)),t._curanimatedegree=(1-Math.cos(n/this.effects.duration*Math.PI))/2},hidemenu:function(e){"undefined"!=typeof e._pos&&(this.css(this.topitems[e._master][parseInt(e._pos)],"selected","remove"),this.enableshim&&this.hideshim()),clearInterval(e._animatetimer),e.style.left=0,e.style.top="-1000px",e.style.visibility="hidden"},addEvent:function(e,t,s){e.addEventListener?e.addEventListener(s,t,!1):e.attachEvent&&e.attachEvent("on"+s,function(){return t.call(e,window.event)})},init:function(e,t){this.standardbody="CSS1Compat"==document.compatMode?document.documentElement:document.body,this.topitemsindex=-1,this.ulindex=-1,this.topmenuids.push(e),this.topitems[e]=[],this.subuls[e]=[],this.hidetimers[e]=[],this.enableshim&&!this.shimadded&&(this.shimmy={},this.shimmy.topshim=this.addshimmy(document.body),this.shimmy.bottomshim=this.addshimmy(document.body),this.shimadded=!0);var s=document.getElementById(e),i=s.getElementsByTagName("a");this.getwindowsize();for(var n=0;n<i.length;n++)if(i[n].getAttribute("rel")){this.topitemsindex++,this.ulindex++;var o=i[n];this.topitems[e][this.topitemsindex]=o;var d=document.getElementById(o.getAttribute("rel"));document.body.appendChild(d),d.style.zIndex=2e3,d._master=e,d._pos=this.topitemsindex,this.addEvent(d,function(){ddlevelsmenu.hidemenu(this)},"click");var h="sidebar"==t?"rightarrowpointer":"downarrowpointer",l="sidebar"==t?this.arrowpointers.rightarrow:this.arrowpointers.downarrow;this.arrowpointers.showarrow.toplevel&&this.addpointer(o,h,l,"sidebar"==t?"before":"after"),this.buildmenu(e,o,d,this.ulindex,!0,t),d.onmouseover=function(){clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])},this.addEvent(d,function(e){if(!ddlevelsmenu.isContained(this,e)&&!ddlevelsmenu.isContained(ddlevelsmenu.topitems[this._master][parseInt(this._pos)],e)){var t=this;ddlevelsmenu.enableshim&&ddlevelsmenu.hideshim(),ddlevelsmenu.hidetimers[this._master][this._pos]=setTimeout(function(){ddlevelsmenu.hidemenu(t)},ddlevelsmenu.hideinterval)}},"mouseout");for(var m=d.getElementsByTagName("ul"),a=0;a<m.length;a++){this.ulindex++;var r=m[a].parentNode;this.arrowpointers.showarrow.sublevel&&this.addpointer(r.getElementsByTagName("a")[0],"rightarrowpointer",this.arrowpointers.rightarrow,"before"),this.buildmenu(e,r,m[a],this.ulindex,!1,t)}}this.addEvent(window,function(){ddlevelsmenu.getwindowsize(),ddlevelsmenu.gettopitemsdimensions()},"resize")},setup:function(e,t){this.addEvent(window,function(){ddlevelsmenu.init(e,t)},"load")}};